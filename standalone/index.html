<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Script Scribbler - Standalone Edition</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Status Notification -->
    <div class="status-notification" id="statusNotification">
        <span id="statusText">Success!</span>
    </div>

    <!-- Export Modal -->
    <div class="export-modal" id="exportModal">
        <div class="export-modal-content">
            <div class="export-modal-header">
                <h2 class="export-modal-title">üöÄ Export & Integrate</h2>
                <button class="close-modal-btn" onclick="closeExportModal()">‚úï</button>
            </div>

            <div class="export-options">
                <div class="export-option" onclick="selectExportType('collaborative')" data-type="collaborative">
                    <span class="export-icon">üë•</span>
                    <div class="export-title">Collaborative Platform</div>
                    <div class="export-desc">Export for team collaboration</div>
                </div>
                <div class="export-option" onclick="selectExportType('production')" data-type="production">
                    <span class="export-icon">üé¨</span>
                    <div class="export-title">Production Ready</div>
                    <div class="export-desc">Format for filming/recording</div>
                </div>
                <div class="export-option" onclick="selectExportType('development')" data-type="development">
                    <span class="export-icon">üõ†Ô∏è</span>
                    <div class="export-title">Development Tools</div>
                    <div class="export-desc">Integrate with dev software</div>
                </div>
                <div class="export-option" onclick="selectExportType('sharing')" data-type="sharing">
                    <span class="export-icon">üîó</span>
                    <div class="export-title">Easy Sharing</div>
                    <div class="export-desc">Web-friendly formats</div>
                </div>
            </div>

            <div class="export-settings" id="exportSettings">
                <div class="setting-group">
                    <label class="setting-label">Project Title</label>
                    <input type="text" class="setting-input" id="projectTitle" value="My Screenplay" placeholder="Enter project title">
                </div>
                <div class="setting-group">
                    <label class="setting-label">Export Format</label>
                    <select class="setting-input" id="exportFormat">
                        <option value="json">JSON (API Integration)</option>
                        <option value="xml">XML (Universal)</option>
                        <option value="fountain">Fountain (Plain Text)</option>
                        <option value="pdf">PDF (Presentation)</option>
                    </select>
                </div>
                <div class="setting-group">
                    <label class="setting-label">Integration Target</label>
                    <select class="setting-input" id="integrationTarget">
                        <option value="generic">Generic Platform</option>
                        <option value="github">GitHub Repository</option>
                        <option value="google-drive">Google Drive</option>
                        <option value="dropbox">Dropbox</option>
                        <option value="slack">Slack Workspace</option>
                        <option value="discord">Discord Server</option>
                    </select>
                </div>
            </div>

            <div class="export-actions">
                <button class="btn btn-secondary" onclick="closeExportModal()">Cancel</button>
                <button class="btn btn-primary" onclick="performExport()">Export & Integrate</button>
            </div>
        </div>
    </div>

    <!-- Search Modal -->
    <div class="export-modal" id="searchModal" style="display: none;">
        <div class="export-modal-content">
            <div class="export-modal-header">
                <h2 class="export-modal-title">üîç Search Project</h2>
                <button class="close-modal-btn" onclick="closeSearchModal()">‚úï</button>
            </div>

            <div class="search-container">
                <input type="text" class="search-input" id="searchInput" placeholder="Search scenes, notes, characters..." oninput="performSearch()">
                <div class="search-filters">
                    <button class="filter-btn active" onclick="setSearchFilter('all')">All</button>
                    <button class="filter-btn" onclick="setSearchFilter('scenes')">Scenes</button>
                    <button class="filter-btn" onclick="setSearchFilter('notes')">Notes</button>
                    <button class="filter-btn" onclick="setSearchFilter('characters')">Characters</button>
                </div>
                <div class="search-results" id="searchResults">
                    <p style="text-align: center; color: #94a3b8; padding: 40px;">Enter a search term to find content across your project</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Import Modal -->
    <div class="export-modal" id="importModal" style="display: none;">
        <div class="export-modal-content">
            <div class="export-modal-header">
                <h2 class="export-modal-title">üì• Import Project</h2>
                <button class="close-modal-btn" onclick="closeImportModal()">‚úï</button>
            </div>

            <div class="import-container">
                <div class="import-dropzone" id="importDropzone">
                    <div class="import-icon">üìÅ</div>
                    <h3>Drop JSON file here or click to browse</h3>
                    <p>Import a previously exported Script Scribbler project</p>
                    <input type="file" id="importFileInput" accept=".json" style="display: none;" onchange="handleImportFile(event)">
                    <button class="btn btn-primary" onclick="document.getElementById('importFileInput').click()">Choose File</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Theme Settings Modal -->
    <div class="export-modal" id="themeModal" style="display: none;">
        <div class="export-modal-content">
            <div class="export-modal-header">
                <h2 class="export-modal-title">üé® Theme Settings</h2>
                <button class="close-modal-btn" onclick="closeThemeModal()">‚úï</button>
            </div>

            <div class="theme-container">
                <div class="theme-options">
                    <div class="theme-option" onclick="setTheme('light')" data-theme="light">
                        <div class="theme-preview light">
                            <div class="preview-bar"></div>
                            <div class="preview-content"></div>
                        </div>
                        <div class="theme-name">Light</div>
                    </div>
                    <div class="theme-option active" onclick="setTheme('default')" data-theme="default">
                        <div class="theme-preview default">
                            <div class="preview-bar"></div>
                            <div class="preview-content"></div>
                        </div>
                        <div class="theme-name">Default (Purple)</div>
                    </div>
                    <div class="theme-option" onclick="setTheme('dark')" data-theme="dark">
                        <div class="theme-preview dark">
                            <div class="preview-bar"></div>
                            <div class="preview-content"></div>
                        </div>
                        <div class="theme-name">Dark</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Top Navigation Bar -->
        <div class="header">
            <h1 class="logo">üìù Script Scribbler</h1>
            <div class="top-nav">
                <button class="top-nav-tab active" onclick="switchMainTab('script')" id="scriptTab">üìú Script</button>
                <button class="top-nav-tab" onclick="switchMainTab('notes')" id="notesTab">üìã Notes</button>
                <button class="top-nav-tab" onclick="switchMainTab('board')" id="boardTab">üé¨ Board</button>
                <button class="top-nav-tab" onclick="switchMainTab('characters')" id="charactersTab">üë• Characters</button>
                <button class="top-nav-tab" onclick="switchMainTab('stats')" id="statsTab">üìä Stats</button>
            </div>
            <div class="header-actions">
                <div class="options-dropdown">
                    <button class="options-cog" onclick="toggleOptionsMenu()">‚öôÔ∏è</button>
                    <div class="options-menu" id="optionsMenu">
                        <div class="options-menu-item" onclick="openSearchModal()">
                            <span class="icon">üîç</span>
                            <span>Search Project</span>
                        </div>
                        <div class="options-menu-item" onclick="openImportModal()">
                            <span class="icon">üì•</span>
                            <span>Import Project</span>
                        </div>
                        <div class="options-menu-item" onclick="openThemeSettings()">
                            <span class="icon">üé®</span>
                            <span>Theme Settings</span>
                        </div>
                        <div class="options-menu-item" onclick="openPreferences()">
                            <span class="icon">‚ö°</span>
                            <span>Preferences</span>
                        </div>
                        <div class="options-menu-item" onclick="openExportModal()">
                            <span class="icon">üöÄ</span>
                            <span>Export & Integrate</span>
                        </div>
                        <div class="options-menu-item" onclick="openAbout()">
                            <span class="icon">‚ÑπÔ∏è</span>
                            <span>About</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="main-content" id="mainContent">
            <!-- Script View -->
            <div id="scriptView" class="view-container">
                <div class="sidebar">
                    <div class="sidebar-section">
                        <h3 class="section-title">üìù Scenes</h3>
                        <div class="scene-list" id="sceneList">
                            <div class="scene-item active" onclick="selectScene(0)">
                                <div class="scene-title">Scene 1</div>
                                <div class="scene-location">INT. COFFEE SHOP - DAY</div>
                            </div>
                            <div class="scene-item" onclick="selectScene(1)">
                                <div class="scene-title">Scene 2</div>
                                <div class="scene-location">EXT. PARK - AFTERNOON</div>
                            </div>
                        </div>
                        <button class="add-scene-btn" onclick="addNewScene()">+ Add Scene</button>
                    </div>

                    <div class="sidebar-section">
                        <h3 class="section-title">üîó Quick Integration</h3>
                        <div class="integration-panel">
                            <div class="integration-title">Ready to collaborate?</div>
                            <div class="integration-options">
                                <div class="integration-option" onclick="quickIntegration('film')">
                                    üé¨ Film Production
                                </div>
                                <div class="integration-option" onclick="quickIntegration('game')">
                                    üéÆ Game Development
                                </div>
                                <div class="integration-option" onclick="quickIntegration('animation')">
                                    üé® Animation Studio
                                </div>
                                <div class="integration-option" onclick="quickIntegration('audio')">
                                    üéµ Audio Production
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="editor-container">
                    <div class="editor-toolbar">
                        <select class="format-select" id="formatSelect" onchange="changeBlockTypeDropdown()">
                            <option value="action">Action</option>
                            <option value="scene-heading">Scene Heading</option>
                            <option value="character">Character</option>
                            <option value="dialogue">Dialogue</option>
                            <option value="parenthetical">Parenthetical</option>
                        </select>
                        <div class="toolbar-info">
                            <span id="wordCount">247 words</span> ‚Ä¢ 
                            <span id="pageCount">2 pages</span> ‚Ä¢ 
                            <span>Integration ready</span>
                        </div>
                    </div>
                    <div class="editor" id="scriptEditor" contenteditable="false" spellcheck="false"></div>
                </div>
            </div>

            <!-- Notes View -->
            <div id="notesView" class="view-container" style="display: none;">
                <div class="sidebar notes-sidebar">
                    <div class="sidebar-section">
                        <h3 class="section-title">üìã Notes</h3>
                        <div class="filter-buttons">
                            <button class="filter-btn active" onclick="filterNotes('all')">All</button>
                            <button class="filter-btn" onclick="filterNotes('character')">Character</button>
                            <button class="filter-btn" onclick="filterNotes('world')">World</button>
                            <button class="filter-btn" onclick="filterNotes('object')">Object</button>
                            <button class="filter-btn" onclick="filterNotes('plot')">Plot</button>
                            <button class="filter-btn" onclick="filterNotes('general')">General</button>
                        </div>
                        <div id="notesListContainer" class="notes-list">
                            <!-- Notes will be dynamically populated here -->
                        </div>
                        <button class="add-scene-btn" onclick="addNewNote()">+ Add Note</button>
                    </div>
                </div>

                <div class="editor-container">
                    <div class="note-details" id="noteDetails">
                        <div class="note-form" id="noteForm">
                            <div class="note-header">
                                <h2 class="note-form-title">Note Details</h2>
                                <div class="note-color-picker">
                                    <div class="color-option yellow active" onclick="changeNoteColor('yellow')" title="Yellow"></div>
                                    <div class="color-option blue" onclick="changeNoteColor('blue')" title="Blue"></div>
                                    <div class="color-option green" onclick="changeNoteColor('green')" title="Green"></div>
                                    <div class="color-option pink" onclick="changeNoteColor('pink')" title="Pink"></div>
                                    <div class="color-option purple" onclick="changeNoteColor('purple')" title="Purple"></div>
                                    <div class="color-option orange" onclick="changeNoteColor('orange')" title="Orange"></div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="form-label">Note Title</label>
                                <input type="text" class="form-input" id="noteTitle" value="" oninput="updateNote()" placeholder="Enter note title">
                            </div>

                            <div class="form-group">
                                <label class="form-label">Note Type</label>
                                <select class="form-input" id="noteType" onchange="updateNoteType()">
                                    <option value="general">General Note</option>
                                    <option value="character">Character Note</option>
                                    <option value="world">World Note</option>
                                    <option value="object">Object Note</option>
                                    <option value="plot">Plot Note</option>
                                </select>
                            </div>

                            <!-- General Note Fields -->
                            <div id="generalFields" class="note-fields-container">
                                <div class="form-group">
                                    <label class="form-label">Content</label>
                                    <textarea class="form-input note-content-editor" id="noteContent" oninput="updateNote()" placeholder="Write your notes here..."></textarea>
                                </div>
                            </div>

                            <!-- Character Note Fields -->
                            <div id="characterFields" class="note-fields-container" style="display: none;">
                                <div class="note-field-row">
                                    <div class="form-group">
                                        <label class="form-label">Character Name</label>
                                        <input type="text" class="form-input" id="charNoteName" oninput="updateNote()" placeholder="e.g., Sarah Mitchell">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Role</label>
                                        <input type="text" class="form-input" id="charNoteRole" oninput="updateNote()" placeholder="e.g., Protagonist">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Traits</label>
                                    <input type="text" class="form-input" id="charNoteTraits" oninput="updateNote()" placeholder="e.g., Determined, witty, empathetic">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Goal</label>
                                    <textarea class="form-input" id="charNoteGoal" oninput="updateNote()" placeholder="What does this character want?" rows="2"></textarea>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Character Arc</label>
                                    <textarea class="form-input" id="charNoteArc" oninput="updateNote()" placeholder="How does this character change?" rows="3"></textarea>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Additional Notes</label>
                                    <textarea class="form-input note-content-editor" id="charNoteAdditional" oninput="updateNote()" placeholder="Background, relationships, quirks, etc."></textarea>
                                </div>
                            </div>

                            <!-- World Note Fields -->
                            <div id="worldFields" class="note-fields-container" style="display: none;">
                                <div class="form-group">
                                    <label class="form-label">Location/Setting Name</label>
                                    <input type="text" class="form-input" id="worldNoteName" oninput="updateNote()" placeholder="e.g., The Tribune Building">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Description</label>
                                    <textarea class="form-input" id="worldNoteDescription" oninput="updateNote()" placeholder="Describe this place or world element..." rows="3"></textarea>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">World Rules/Logic</label>
                                    <textarea class="form-input" id="worldNoteRules" oninput="updateNote()" placeholder="How does this world work?" rows="3"></textarea>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Brand/Object Replacements</label>
                                    <textarea class="form-input" id="worldNoteReplacements" oninput="updateNote()" placeholder="e.g., 'Nintendo' ‚Üí 'Funtendo'" rows="2"></textarea>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Additional Details</label>
                                    <textarea class="form-input note-content-editor" id="worldNoteAdditional" oninput="updateNote()" placeholder="Culture, atmosphere, significance..."></textarea>
                                </div>
                            </div>

                            <!-- Object Note Fields -->
                            <div id="objectFields" class="note-fields-container" style="display: none;">
                                <div class="form-group">
                                    <label class="form-label">Object Name</label>
                                    <input type="text" class="form-input" id="objectNoteName" oninput="updateNote()" placeholder="e.g., Sarah's Notebook">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Description</label>
                                    <textarea class="form-input" id="objectNoteDescription" oninput="updateNote()" placeholder="What does this object look like?" rows="2"></textarea>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Significance</label>
                                    <textarea class="form-input" id="objectNoteSignificance" oninput="updateNote()" placeholder="Why is this important?" rows="3"></textarea>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Additional Notes</label>
                                    <textarea class="form-input note-content-editor" id="objectNoteAdditional" oninput="updateNote()" placeholder="History, how it's used, etc."></textarea>
                                </div>
                            </div>

                            <!-- Plot Note Fields -->
                            <div id="plotFields" class="note-fields-container" style="display: none;">
                                <div class="form-group">
                                    <label class="form-label">Plot Point/Beat</label>
                                    <input type="text" class="form-input" id="plotNoteBeat" oninput="updateNote()" placeholder="e.g., Inciting Incident">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Summary</label>
                                    <textarea class="form-input" id="plotNoteSummary" oninput="updateNote()" placeholder="Brief summary..." rows="3"></textarea>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Detailed Notes</label>
                                    <textarea class="form-input note-content-editor" id="plotNoteDetails" oninput="updateNote()" placeholder="Freeform notes, ideas, etc."></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Board View -->
            <div id="boardView" class="view-container" style="display: none;">
                <div class="board-container">
                    <div class="board-header">
                        <h2 class="board-title">üé¨ Scene Board</h2>
                        <div class="board-controls">
                            <div class="view-toggle">
                                <button class="view-btn active" onclick="setBoardView('grid')" id="gridViewBtn">Grid</button>
                                <button class="view-btn" onclick="setBoardView('timeline')" id="timelineViewBtn">Timeline</button>
                            </div>
                        </div>
                    </div>
                    <div class="scene-cards-container" id="sceneCardsContainer">
                        <!-- Scene cards will be dynamically populated here -->
                    </div>
                </div>
            </div>

            <!-- Characters View -->
            <div id="charactersView" class="view-container" style="display: none;">
                <div class="characters-container">
                    <div class="characters-header">
                        <h2 class="characters-title">üë• Characters</h2>
                        <button class="add-character-btn" onclick="addNewCharacter()">+ Add Character</button>
                    </div>
                    <div class="characters-grid" id="charactersGrid">
                        <!-- Character cards will be dynamically populated here -->
                    </div>
                </div>
            </div>

            <!-- Stats View -->
            <div id="statsView" class="view-container" style="display: none;">
                <div class="stats-container">
                    <div class="stats-header">
                        <h2 class="stats-title">üìä Script Statistics</h2>
                        <p class="stats-subtitle">Professional metrics for your screenplay</p>
                    </div>
                    <div class="stats-grid">
                        <div class="stat-card pages">
                            <div class="stat-icon">üìÑ</div>
                            <div class="stat-value" id="statTotalPages">0</div>
                            <div class="stat-label">Total Pages</div>
                        </div>
                        <div class="stat-card runtime">
                            <div class="stat-icon">‚è±Ô∏è</div>
                            <div class="stat-value" id="statEstimatedRuntime">0</div>
                            <div class="stat-label">Est. Runtime (min)</div>
                        </div>
                        <div class="stat-card scenes">
                            <div class="stat-icon">üé¨</div>
                            <div class="stat-value" id="statTotalScenes">0</div>
                            <div class="stat-label">Total Scenes</div>
                        </div>
                        <div class="stat-card words">
                            <div class="stat-icon">üìù</div>
                            <div class="stat-value" id="statTotalWords">0</div>
                            <div class="stat-label">Total Words</div>
                        </div>
                    </div>
                    <div class="stats-details">
                        <div class="stat-detail-card">
                            <h3>Scene Breakdown</h3>
                            <div id="sceneBreakdown" class="stat-content">Loading...</div>
                        </div>
                        <div class="stat-detail-card">
                            <h3>Character Analysis</h3>
                            <div id="characterAnalysis" class="stat-content">Loading...</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="index.js"></script>
</body>
</html>
